# Шаблон для FastAPI приложения с использованием SQLAlchemy

## Цель
Создать общий шаблон для быстрого старта разработки приложения на Fastapi+SqlAlchemy+Docker

## Архитектура

Для данного проекта используется DDD. 


Внутри проекта введены следующие обозначения:
1. `Entity` представляет собой бизнес сущность, расположенные в слое `Domain entity`.
2. `Repository` - паттерн репозиторий, выделенный в отдельный слой, позволяющий создать абстракцию над способом взаимодействия с данными. Репозитории расположены в слое `Domain repository`. Благодаря данной абстракции мы не привязаны к конкретной СУБД, API и прочим способам. Также данный паттерн в связке с DI позволяет легко писать тесты .
3. `Services` - методы бизнес логики в доменной области приложения. Расположены в слое `Domain services`. Тут располагается все манипуляции с уже полученными данными с точки зрения бизнеса. К примеру, тут может быть какой-нибудь конструктор отчетов, расчет стоимости перевозки груза, авторизация пользователя и.т.д.
4. Слой `App` - слой, в котором появляются библиотеки и реализации репозиториев и сервисов. Тут мы связываем доменную область с ее конкретной реализацией.

## Как пользоваться?

### Пример
Для понимания работы написана логика работы с users. На основе данного примера вы можете составить собственный код.

### Миграции
Для создания миграции выполните:
```
uv run alembic revision --autogenerate -m "Commit name"
```
Для выполнения миграции выполните:
```
uv run alembic upgrade head
```

### Docker
Билд контейнера:
```
docker build
```
Перед запуском убедитесь, что сформировали .env, в котором описаны нужные переменные окружения. Список переменных можно найти в `core/config.py`. Запуск контейнера:
```
docker run --env-file .env
```

## Важно помнить
1. Я использую `uvicorn` в качестве ASGI-сервера, но вы можете любой другой.
2. Если изменились конфиги, связанные с БД, то не забудьте обновить их в `migrations/config.py`
